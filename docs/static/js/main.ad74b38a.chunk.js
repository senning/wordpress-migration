(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(9),i=n.n(s),l=(n(16),n(1)),r=n(2),c=n(4),u=n(3),p=n(5),h=n(6),d=(n(7),o.a.createContext(null)),m=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:n.props.defaultValue},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onFocus=n.onFocus.bind(Object(h.a)(n)),n.onBlur=n.onBlur.bind(Object(h.a)(n)),n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"onChange",value:function(e){var t=e.target.value;"function"===typeof this.props.validator&&(t=this.props.validator(t)),console.log("oc",this.context),this.context.update(this.props.instance,this.props.name,t),this.setState({value:t})}},{key:"onFocus",value:function(){this.setState({focus:!0})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"render",value:function(){var e="input-container";return e+=this.state.focus?" is-focussed":"",o.a.createElement("label",{className:e},o.a.createElement("span",{className:"input-label"},this.props.label),o.a.createElement("input",{className:"input-control",type:this.props.type,value:this.context[this.props.instance][this.props.name],onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,autoFocus:this.context.autofocus===this.props.instance+"-"+this.props.name}))}}]),t}(a.Component);m.defaultProps={label:"",type:"input",name:"",defaultValue:"",onChange:function(){}},m.contextType=d;var f=m,g=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"autoProtocol",value:function(e){return e=e.match(/^.*:\/\//g)?e:"https://"+e}},{key:"render",value:function(){return o.a.createElement("div",{className:"instance"},o.a.createElement("h1",{className:"instance-title"},this.props.label),o.a.createElement(f,{instance:this.props.instance,label:"Site URL",name:"url",validator:this.autoProtocol}),o.a.createElement(f,{instance:this.props.instance,label:"Table Prefix",name:"prefix",defaultValue:"wp_"}))}}]),t}(a.Component);g.defaultProps={label:""};var w=g,E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showHints:!1},n.toggleHints=n.toggleHints.bind(Object(h.a)(n)),n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"toggleHints",value:function(){this.setState({showHints:!this.state.showHints})}},{key:"render",value:function(){return o.a.createElement("div",{className:"commands"},o.a.createElement("h1",{className:"commands-title"},"Here's your SQL:"),o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"options SET option_value = replace(option_value, '",this.context.old.url,"', '",this.context.new.url,"');"),o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"posts SET guid = replace(guid, '",this.context.old.url,"', '",this.context.new.url,"') WHERE post_type <> 'attachment';"),o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"posts SET post_content = replace(post_content, '",this.context.old.url,"', '",this.context.new.url,"');"),o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"postmeta SET meta_value = replace(meta_value, '",this.context.old.url,"', '",this.context.new.url,"');"),this.context.new.prefix!==this.context.old.prefix?o.a.createElement(a.Fragment,null,o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"usermeta SET meta_key = replace(meta_key, '",this.context.old.prefix,"', '",this.context.new.prefix,"');"),o.a.createElement("p",null,"UPDATE ",this.context.new.prefix,"options SET option_name = replace(option_name, '",this.context.old.prefix,"', '",this.context.new.prefix,"');")):"",this.state.showHints?o.a.createElement("div",{className:"hint-text"},o.a.createElement("button",{className:"hint-trigger",title:"Hide description of SQL commands",onClick:this.toggleHints},"\xd7"),o.a.createElement("h1",{className:"commands-title"},"Here's what each command does:"),o.a.createElement("ol",null,o.a.createElement("li",null,"Update the ",o.a.createElement("code",null,"options")," so WordPress knows where your site is. Used for things like including assets and locating the admin dashboard; it'll also update any URLs in your widgets."),o.a.createElement("li",null,"Update the ",o.a.createElement("code",null,"posts")," table to set the permalink for all of your posts and pages to the new site."),o.a.createElement("li",null,"Update the ",o.a.createElement("code",null,"posts")," table so that all of the links and images ",o.a.createElement("em",null,"in")," your posts and pages are pointed to the new site."),o.a.createElement("li",null,"Update and ",o.a.createElement("code",null,"post_meta")," to point to the new site. These are generally used by plugins or theme customizations.")),o.a.createElement("p",null,"These two commands are only necessary, and will only show up, if the table prefix is changing:"),o.a.createElement("ol",null,o.a.createElement("li",null,"Updates each user's capabilities and dashboard settings to use the new prefix."),o.a.createElement("li",null,"Update the site's capabilities settings to use the new prefix."))):o.a.createElement("button",{className:"hint-trigger",title:"Show description of SQL commands",onClick:this.toggleHints},"?"))}}]),t}(a.Component);E.contextType=d;var b=E,v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).update=function(e,t,a){n.state[e][t]=a,n.setState(n.state)},n.state={old:{url:"https://",prefix:"wp_"},new:{url:"https://",prefix:"wp_"},autofocus:"old-url",update:n.update},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"header"},o.a.createElement("h1",{className:"header-title"},"WordPress Migration SQL Maker"),o.a.createElement("p",{className:"header-credit"},o.a.createElement("a",{href:"https://medium.com/@senning"},"@senning"))),o.a.createElement("section",{className:"body"},o.a.createElement(d.Provider,{value:this.state},o.a.createElement(w,{instance:"old",label:"Current Site"}),o.a.createElement(w,{instance:"new",label:"New Site"}),o.a.createElement(b,null))))}}]),t}(a.Component),x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(v,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");x?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}()},7:function(e,t,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.ad74b38a.chunk.js.map